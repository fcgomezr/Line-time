# Operationalizing Machine Learning

In this project, we have used <a href= 'https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv'> Bank Marketing dataset </a> to train a machine learning model using AutoML feature of Azure Machine Learning Studio and later configure it for production and deploy it using Azure Container Instance and later consume it using REST endpoints. We will also create, publish and consume a pipeline.

## Architectural Diagram

<img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/architecture.png'>
<p> From the above architectural diagram, we can see and understand the flow of operations from start to finish. Lets understand each operation :
<ol>
  <li>Register the Dataset</li>
  <li>Specify the dataset and configuration details such as machine learning task, here in our case its a classification task, exit criteria, etc. for selecting the best model           that AutoML will produce.</li>
  <li>Based on the metric selected in AutoML, select the best model and deploy it using azure container instance(ACI)</li>
  <li>Enable logging and application insight service for keeping track of deployed model performance and number of request handled/failed.</li>
  <li>After deployment and enabling the logs and application insights use the REST endpoint to interact with the deployed model with sample data and check its prediction results. </li>
  <li>Using python SDK create a pipeline selecting the best AutoML model and publish it.</li>
</ol>
</p>

### Future Work

<p> The project can be further improved by:
  <ul>
    <li> creating an interactive frontend to display the deployed models prediction result instead of showing on git bash </li>
    <li> get more user for testing so as to get service insights through <i> application insights </i> </li>
  </ul>
</p>

## Key Steps

### Create a new AutoML run
<section>
  <p> In this step, we have created an experiment using Automated ML, configured a compute cluster, and used that cluster to run the experiment. The below images shows the             dataset used, completion status of the experiment and the different models generated by AutoML. We can also notice that the best model generated is <b>voting ensemble           model </b> with an approximate accuracy of <b>91.7%</b>
  </p>
  <p float="left">   
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/New_AutoML_Run/dataset.PNG' width="40%" />
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/New_AutoML_Run/automl_completed.PNG' width="36%" /><br>
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/New_AutoML_Run/automl_runs.PNG' width="89%" />
  </p>
</section>

### Deploy best automl model and consume the model endpoint via an HTTP API
<section>
  <p> In this step, we have deployed the best model(voting ensemle) whose details are shown in below images, we can see that :
    <ul>
      <li> we have enabled key based authentication so that only authorized users having the key can interact with the model, </li>
      <li> we have also enabled application insights to track the request received by the model enpoint and its performance and usage details and </li>
      <li> we have enabled the logging feature to capture the logs and check them, when required. </li>
    </ul>
  </p>
  <p float="left">
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/Model-deployment%20-consumption/deployed_endpoint_details.PNG'       width="70%" /><br>
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/Model-deployment%20-consumption/logs_enabled.PNG' width="50%" />
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/Model-deployment%20-consumption/swagger1.PNG' width="40%" /><br>
    <p></p>
    <p> Also, we have used swagger tool that helps build, document, and consume RESTful web services like the ones we have deployed.It further explains what types of HTTP               requests that an API can consume, like POST and GET. Azure provides a swagger.json that is used to create a web site that documents the HTTP endpoint for a deployed             model.
    </p>
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/POST.png' width="70%" />
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/GET_Response.PNG' width="70%" /><br>
    <p></p>
    <p> In the below image, we can notice that we have run the <i>endpoint.py</i> file which contains rest endpoint url to interact with the deployed model and key value for             authentication and two sample data points in JSON format.
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/Model-deployment%20-consumption/endpoint_output.PNG' width="50%" />
  </p>
</section>

### Publish an ML Pipeline
<section>
  In this step, we have used python SDK to create and publish the pipeline, whose details are shown and highlighted in below images. We can see that:
  <ul>
    <li> pipeline scheduled run details </li>
    <li> pipeline has been successfully created </li>
    <li> pipeline REST endpoint in active state </li>
  </ul>
  <p>
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/Pipeline/pipeline_status_code.PNG'/>
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/Pipeline/pipeline_run_details.PNG'/>
    <img src= 'https://github.com/murphy999/Udacity-Azure-ML-Scholarship/blob/master/nd00333_AZMLND_C2/imgs/Pipeline/pipeline_published.PNG'/>
  </p>
</section>

## Screen Recording

[![Operationalizing Machine Learning](http://img.youtube.com/vi/6hU1IKibDeQ/0.jpg)](http://www.youtube.com/watch?v=6hU1IKibDeQ "Operationalizing Machine Learning")

